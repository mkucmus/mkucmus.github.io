import{a as S,a7 as z,r as g,ab as M,t as v,J as A,q as D,o as i,j as l,v as t,u as e,k as m,y as p,R as c,S as f,a9 as L}from"./entry.4f4ac261.js";import{u as R,r as x,e as k,s as Y,a as j,m as F}from"./index.esm.6601123d.js";const P={class:"space-y-8"},J=t("div",{class:"text-sm text-gray-500"},[t("div",null," Feel free to edit any of your details below so your account is always up to date ")],-1),T=["onSubmit"],G={key:0,class:"p-4 mb-4 text-sm text-green-700 bg-green-100 rounded-lg",role:"alert"},H=t("span",{class:"font-medium"},"Your information has been updated.",-1),K=[H],O={key:1,class:"text-red-600 focus:ring-brand-primary border-gray-300 rounded"},Q={class:"mt-4 space-y-4 lg:mt-5 md:space-y-5"},W=t("label",{for:"firstname",class:"block mb-2 text-sm font-medium text-gray-500"}," First name ",-1),X={key:0,class:"text-red-600 focus:ring-brand-primary border-gray-300 rounded"},Z=t("label",{for:"lastname",class:"block mb-2 text-sm font-medium text-gray-500"}," Last name ",-1),ee={key:0,class:"text-red-600 focus:ring-brand-primary border-gray-300 rounded"},ae=t("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-500"}," Your email ",-1),re={key:0,class:"text-red-600 focus:ring-brand-primary border-gray-300 rounded"},te={key:0},se=t("label",{for:"email-confirm",class:"block mb-2 text-sm font-medium text-gray-500"}," Confirm e-mail ",-1),oe={key:0,class:"text-red-600 focus:ring-brand-primary border-gray-300 rounded"},ne={key:1},ie=t("label",{for:"password",class:"block mb-2 text-sm font-medium text-gray-500"}," Your password ",-1),le={key:0,class:"text-red-600 focus:ring-brand-primary border-gray-300 rounded"},me=t("div",null,[t("button",{class:"group relative w-full flex justify-center py-2 px-4 mb-4 border border-transparent text-sm font-medium rounded-md text-white bg-brand-primary hover:bg-brand-dark focus:outline-none focus:ring-2 focus:ring-brand-primary",type:"submit"}," Save changes ")],-1),ce=S({__name:"AccountPersonalData",setup(de){const{user:d,refreshUser:w,updatePersonalInfo:C,updateEmail:q}=z(),y=g([]),b=g(!1),U=g(!1),h=g(!1),r=M({firstName:"",lastName:"",email:"",emailConfirmation:"",password:"",salutationId:"",title:""}),u=v(()=>{var n;return r.email!==((n=d.value)==null?void 0:n.email)}),_=v(()=>{var n,a;return r.firstName!==((n=d.value)==null?void 0:n.firstName)||r.lastName!==((a=d.value)==null?void 0:a.lastName)}),V=A(r),B=v(()=>u.value?{required:x,email:k,sameAsEmail:Y(V.email)}:{}),E=v(()=>({firstName:{required:x},lastName:{required:x},email:{email:k,required:x},emailConfirmation:B.value,password:{required:j(()=>u.value),minLength:F(8)}})),o=R(E,r),I=async()=>{y.value=[],b.value=!1;try{if(U.value=!1,o.value.$touch(),o.value.$invalid||!_.value&&!u.value)return;h.value=!0,_.value&&(await C({firstName:r.firstName,lastName:r.lastName,salutationId:r.salutationId,title:r.title}),b.value=!0),u.value&&(await q({email:r.email,emailConfirmation:r.emailConfirmation,password:r.password}),b.value=!0),h.value=!1,w()}catch(n){const a=n;y.value=a.messages.map(s=>s.detail)}};return D(async()=>{var n,a,s,N,$;await w(),r.firstName=((n=d.value)==null?void 0:n.firstName)||"",r.lastName=((a=d.value)==null?void 0:a.lastName)||"",r.email=((s=d.value)==null?void 0:s.email)||"",r.salutationId=((N=d.value)==null?void 0:N.salutationId)||"",r.title=(($=d.value)==null?void 0:$.title)||""}),(n,a)=>(i(),l("div",P,[J,t("form",{class:"mt-8 space-y-6",onSubmit:L(I,["prevent"])},[e(b)?(i(),l("div",G,K)):m("",!0),e(y).length?(i(),l("div",O,p(e(y)),1)):m("",!0),t("div",Q,[t("div",null,[W,c(t("input",{id:"firstname","onUpdate:modelValue":a[0]||(a[0]=s=>e(r).firstName=s),name:"firstname",type:"text",autocomplete:"firstname",required:"",class:"appearance-none rounded-md shadow-sm relative block w-full px-3 py-2 border border-gray-300 text-gray-900 focus:outline-none focus:ring-brand-primary focus:border-brand-primary focus:z-10 sm:text-sm",placeholder:"Enter first name...",onBlur:a[1]||(a[1]=s=>e(o).firstName.$touch())},null,544),[[f,e(r).firstName]]),e(o).firstName.$error?(i(),l("span",X,p(e(o).firstName.$errors[0].$message),1)):m("",!0)]),t("div",null,[Z,c(t("input",{id:"lastname","onUpdate:modelValue":a[2]||(a[2]=s=>e(r).lastName=s),name:"lastname",type:"text",autocomplete:"lastname",required:"",class:"appearance-none rounded-md shadow-sm relative block w-full px-3 py-2 border border-gray-300 text-gray-900 focus:outline-none focus:ring-brand-primary focus:border-brand-primary focus:z-10 sm:text-sm",placeholder:"Enter last name...",onBlur:a[3]||(a[3]=s=>e(o).lastName.$touch())},null,544),[[f,e(r).lastName]]),e(o).lastName.$error?(i(),l("span",ee,p(e(o).lastName.$errors[0].$message),1)):m("",!0)]),t("div",null,[ae,c(t("input",{id:"email","onUpdate:modelValue":a[4]||(a[4]=s=>e(r).email=s),name:"email",type:"email",autocomplete:"email",required:"",class:"appearance-none rounded-md shadow-sm relative block w-full px-3 py-2 border border-gray-300 text-gray-900 focus:outline-none focus:ring-brand-primary focus:border-brand-primary focus:z-10 sm:text-sm",placeholder:"Enter the email...",onBlur:a[5]||(a[5]=s=>e(o).email.$touch())},null,544),[[f,e(r).email]]),e(o).email.$error?(i(),l("span",re,p(e(o).email.$errors[0].$message),1)):m("",!0)]),e(u)?(i(),l("div",te,[se,c(t("input",{id:"email-confirm","onUpdate:modelValue":a[6]||(a[6]=s=>e(r).emailConfirmation=s),name:"email-confirm",type:"email",autocomplete:"email-confirm",required:"",class:"appearance-none rounded-md shadow-sm relative block w-full px-3 py-2 border border-gray-300 text-gray-900 focus:outline-none focus:ring-brand-primary focus:border-brand-primary focus:z-10 sm:text-sm",placeholder:"Enter the email...",onBlur:a[7]||(a[7]=s=>e(o).emailConfirmation.$touch())},null,544),[[f,e(r).emailConfirmation]]),e(o).emailConfirmation.$error?(i(),l("span",oe,p(e(o).emailConfirmation.$errors[0].$message),1)):m("",!0)])):m("",!0),e(u)?(i(),l("div",ne,[ie,c(t("input",{id:"password","onUpdate:modelValue":a[8]||(a[8]=s=>e(r).password=s),name:"password",type:"password",autocomplete:"password",required:"",class:"appearance-none rounded-md shadow-sm relative block w-full px-3 py-2 border border-gray-300 text-gray-900 focus:outline-none focus:ring-brand-primary focus:border-brand-primary focus:z-10 sm:text-sm",placeholder:"••••••••",onBlur:a[9]||(a[9]=s=>e(o).password.$touch())},null,544),[[f,e(r).password]]),e(o).password.$error?(i(),l("span",le,p(e(o).password.$errors[0].$message),1)):m("",!0)])):m("",!0)]),me],40,T)]))}});export{ce as _};
